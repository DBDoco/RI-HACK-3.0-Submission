<div class="profile-container">
  <div class="left-section">
    <div class="profile-card">
      <img [src]="user?.image" alt="Profile Picture" class="profile-img" />
      <h2>{{ user?.firstName }} {{ user?.lastName }}</h2>
      <p>
        <span class="pi pi-envelope"></span>
        <a [href]="'mailto:' + user?.email">{{ user?.email }}</a>
      </p>
      <p>
        <span class="pi pi-phone"></span>
        <a [href]="'tel:' + user?.phone">{{ user?.phone }}</a>
      </p>
      <button class="message-btn">Poruka</button>
    </div>

    <div class="about-section section">
      <h4>O Meni</h4>
      <p>{{ user?.description }}</p>
    </div>
  </div>

  <div class="right-section">
    <div class="skills-section section">
      <h4>Vještine</h4>
      <div class="skills-list">
        @for(service of services; track service) {
        <div class="skill-tag" (click)="openService(service.id)">
          <img
            [src]="service?.image"
            alt="{{ service.name }}"
            class="skill-img"
          />
          <div class="skill-info">
            <p class="skill-name">{{ service?.name }}</p>
            <p class="skill-description">{{ service?.description }}</p>
          </div>
        </div>
        }
      </div>
    </div>

    <div class="stats-section section">
      <h4>Statistika</h4>
      <div class="stats">
        <div class="stat">
          <span class="stat-icon">
            <i class="pi pi-folder"></i>
          </span>
          <div class="stat-info">
            <p class="stat-label">Projekti</p>
            <p class="stat-number">48</p>
          </div>
        </div>
        <div class="stat">
          <span class="stat-icon">
            <i class="pi pi-cog"></i>
          </span>
          <div class="stat-info">
            <p class="stat-label">Broj Vještina</p>
            <p class="stat-number">{{ services?.length }}</p>
          </div>
        </div>
        <div class="stat">
          <span class="stat-icon">
            <i class="pi pi-star"></i>
          </span>
          <div class="stat-info">
            <p class="stat-label">Prosječna Ocjena</p>
            <p class="stat-number">
              {{ getAverageRating() | number : "1.1-1" }} / 5
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="reviews-section section">
      <h4>Recenzije</h4>
      @for(review of reviews; track review) {
      <div class="review">
        <div class="review-info">
          <h5>{{ review.reviewerName }}</h5>
          <p>{{ review.comment }}</p>
          <div class="rating">
            @for(star of getStars(review.rating); track star) {
            <span
              [ngClass]="{ filled: star === 'filled', empty: star === 'empty' }"
              >&#9733;</span
            >
            }
          </div>
        </div>
      </div>
      }
    </div>
  </div>
</div>
